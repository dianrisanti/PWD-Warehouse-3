{"ast":null,"code":"import Axios from 'axios';\nexport const login = data => {\n  return async dispatch => {\n    try {\n      const res = await Axios.post('http://localhost:2000/user/login', data); // console.log(res.data)\n\n      localStorage.token = res.data.token;\n      dispatch({\n        type: 'LOG_IN',\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: 'LOGIN_ERR',\n        payload: err.response.data\n      });\n      console.log(err ? `ERROR : ${err.response.data}` : err);\n    }\n  };\n};\nexport const logout = () => {\n  return async dispatch => {\n    try {\n      localStorage.removeItem('token');\n      await dispatch({\n        type: 'LOG_OUT'\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n};\nexport const verification = () => {\n  return {\n    type: 'VERIFICATION'\n  };\n};\nexport const paymentConf = data => {\n  return async dispatch => {\n    try {\n      dispatch({\n        type: 'PAYMENTCONFIRMATION',\n        payload: data\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n};\nexport const keepLogin = () => {\n  return async dispatch => {\n    try {\n      // console.log('keep login')\n      // get token from local storage\n      const token = localStorage.getItem('token'); // console.log(token)\n      // get user data from token\n\n      const res = await Axios.post('http://localhost:2000/user/keepLogin', {\n        token\n      }); // console.log('hasil dari api', res.data)\n\n      dispatch({\n        type: 'LOG_IN',\n        payload: res.data\n      });\n    } catch (err) {\n      console.log(err);\n      dispatch({\n        type: 'LOG_OUT'\n      });\n      localStorage.removeItem('id');\n      localStorage.removeItem('token');\n    }\n  };\n};\nexport const editProfile = (data, id) => {\n  return async dispatch => {\n    try {\n      const res = await Axios.post(`http://localhost:2000/profile/edit/${parseInt(id)}`, data);\n      console.log('hasil respon: ', res.data);\n      const token = localStorage.getItem('token');\n      const res2 = await Axios.post('http://localhost:2000/user/keeplogin', {\n        token\n      });\n      dispatch({\n        type: 'LOG_IN',\n        payload: res2.data\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n};\nexport const upload = (pict, order_number) => {\n  return async dispatch => {\n    try {\n      // console.log(data, id)\n      const option = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      };\n      const res = await Axios.post(`http://localhost:2000/user/upload_payment/${order_number}`, pict, option);\n      console.log(res.data);\n      const token = localStorage.getItem('token'); // console.log(token)\n      // get user data from token\n\n      const res2 = await Axios.post('http://localhost:2000/user/keepLogin', {\n        token\n      }); // console.log('hasil dari api', res.data)\n\n      dispatch({\n        type: 'LOG_IN',\n        payload: res2.data\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n};\nexport const getPaymentConf = order_number => {\n  return async dispatch => {\n    try {\n      // console.log(data, id)\n      const option = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      };\n      const res = await Axios.get(`http://localhost:2000/user/getpayment/${order_number}`, option);\n      console.log(res.data);\n      const token = localStorage.getItem('token'); // console.log(token)\n      // get user data from token\n\n      const res2 = await Axios.post('http://localhost:2000/user/keepLogin', {\n        token\n      }); // console.log('hasil dari api', res.data)\n\n      dispatch({\n        type: 'LOG_IN',\n        payload: res2.data\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/knigh/Documents/PURWADHIKA JCWM/final_project/PWD-Warehouse-3/Final_Project_Group_3/Front_End/pwd_warehouse_03/src/actions/userAction.jsx"],"names":["Axios","login","data","dispatch","res","post","localStorage","token","type","payload","err","response","console","log","logout","removeItem","verification","paymentConf","keepLogin","getItem","editProfile","id","parseInt","res2","upload","pict","order_number","option","headers","getPaymentConf","get"],"mappings":"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","sourcesContent":["import Axios from 'axios'\r\n\r\nexport const login = (data) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const res = await Axios.post('http://localhost:2000/user/login', data)\r\n            // console.log(res.data)\r\n\r\n            localStorage.token = res.data.token\r\n\r\n            dispatch({ type: 'LOG_IN', payload: res.data })\r\n        }\r\n        catch (err) {\r\n            dispatch({ type: 'LOGIN_ERR', payload: err.response.data })\r\n            console.log(err ? `ERROR : ${err.response.data}` : err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const logout = () => {\r\n    return async (dispatch) => {\r\n        try {\r\n            localStorage.removeItem('token')\r\n            await dispatch({ type: 'LOG_OUT' })\r\n        }\r\n        catch (err) {\r\n            console.log(err)\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport const verification = () => {\r\n    return {\r\n        type: 'VERIFICATION'\r\n    }\r\n}\r\n\r\nexport const paymentConf = (data) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            dispatch({ type: 'PAYMENTCONFIRMATION', payload: data })\r\n        }\r\n        catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const keepLogin = () => {\r\n    return async (dispatch) => {\r\n        try {\r\n            // console.log('keep login')\r\n            // get token from local storage\r\n            const token = localStorage.getItem('token')\r\n            // console.log(token)\r\n\r\n            // get user data from token\r\n            const res = await Axios.post('http://localhost:2000/user/keepLogin', { token })\r\n            // console.log('hasil dari api', res.data)\r\n\r\n            dispatch({ type: 'LOG_IN', payload: res.data })\r\n        }\r\n        catch (err) {\r\n            console.log(err)\r\n            dispatch({ type: 'LOG_OUT' })\r\n            localStorage.removeItem('id')\r\n            localStorage.removeItem('token')\r\n        }\r\n    }\r\n}\r\n\r\nexport const editProfile = (data, id) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const res = await Axios.post(`http://localhost:2000/profile/edit/${parseInt(id)}`, data)\r\n            console.log('hasil respon: ', res.data)\r\n\r\n            const token = localStorage.getItem('token')\r\n\r\n            const res2 = await Axios.post('http://localhost:2000/user/keeplogin', { token })\r\n            dispatch({ type: 'LOG_IN', payload: res2.data })\r\n        }\r\n        catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const upload = (pict, order_number) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            // console.log(data, id)\r\n            const option = {\r\n                headers: { 'Content-Type': 'multipart/form-data' }\r\n            }\r\n\r\n            const res = await Axios.post(`http://localhost:2000/user/upload_payment/${order_number}`, pict, option)\r\n            console.log(res.data)\r\n\r\n            const token = localStorage.getItem('token')\r\n            // console.log(token)\r\n\r\n            // get user data from token\r\n            const res2 = await Axios.post('http://localhost:2000/user/keepLogin', { token })\r\n            // console.log('hasil dari api', res.data)\r\n\r\n            dispatch({ type: 'LOG_IN', payload: res2.data })\r\n        }\r\n        catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport const getPaymentConf = (order_number) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            // console.log(data, id)\r\n            const option = {\r\n                headers: { 'Content-Type': 'multipart/form-data' }\r\n            }\r\n\r\n            const res = await Axios.get(`http://localhost:2000/user/getpayment/${order_number}`, option)\r\n            console.log(res.data)\r\n\r\n            const token = localStorage.getItem('token')\r\n            // console.log(token)\r\n\r\n            // get user data from token\r\n            const res2 = await Axios.post('http://localhost:2000/user/keepLogin', { token })\r\n            // console.log('hasil dari api', res.data)\r\n\r\n            dispatch({ type: 'LOG_IN', payload: res2.data })\r\n        }\r\n        catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n}"]},"metadata":{},"sourceType":"module"}