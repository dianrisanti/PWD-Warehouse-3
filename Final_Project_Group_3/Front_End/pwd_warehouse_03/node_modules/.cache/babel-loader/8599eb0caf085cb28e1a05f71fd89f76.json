{"ast":null,"code":"import Axios from 'axios';\nexport const login = data => {\n  return async dispatch => {\n    try {\n      const res = await Axios.post('http://localhost:2000/user/login', data); // console.log(res.data)\n\n      localStorage.token = res.data.token;\n      dispatch({\n        type: 'LOG_IN',\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: 'LOGIN_ERR',\n        payload: err.response.data\n      });\n      console.log(err ? `ERROR : ${err.response.data}` : err);\n    }\n  };\n};\nexport const logout = () => {\n  return async dispatch => {\n    try {\n      localStorage.removeItem('token');\n      dispatch({\n        type: 'LOG_OUT'\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n};\nexport const verification = () => {\n  return {\n    type: 'VERIFICATION'\n  };\n};\nexport const keepLogin = () => {\n  return async dispatch => {\n    try {\n      // console.log('keep login')\n      // get token from local storage\n      const token = localStorage.getItem('token'); // console.log(token)\n      // get user data from token\n\n      const res = await Axios.post('http://localhost:2000/user/keepLogin', {\n        token\n      }); // console.log('hasil dari api', res.data)\n\n      dispatch({\n        type: 'LOG_IN',\n        payload: res.data\n      });\n    } catch (err) {\n      console.log(err);\n      localStorage.removeItem('id');\n      localStorage.removeItem('token');\n      dispatch({\n        type: 'LOG_OUT'\n      });\n    }\n  };\n};\nexport const editProfile = (data, id) => {\n  return async dispatch => {\n    try {\n      const res = await Axios.post(`http://localhost:2000/profile/edit/${id}`, data);\n      console.log('hasil respon: ', res.data);\n      const token = localStorage.getItem('token');\n      const res2 = await Axios.post('http://localhost:2000/user/keeplogin', {\n        token\n      });\n      dispatch({\n        type: 'LOG_IN',\n        payload: res2.data\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/knigh/Documents/PURWADHIKA JCWM/final_project/PWD-Warehouse-3/Final_Project_Group_3/Front_End/pwd_warehouse_03/src/actions/userAction.jsx"],"names":["Axios","login","data","dispatch","res","post","localStorage","token","type","payload","err","response","console","log","logout","removeItem","verification","keepLogin","getItem","editProfile","id","res2"],"mappings":"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","sourcesContent":["import Axios from 'axios'\r\n\r\nexport const login = (data) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const res = await Axios.post('http://localhost:2000/user/login', data)\r\n            // console.log(res.data)\r\n\r\n            localStorage.token = res.data.token\r\n\r\n            dispatch({ type: 'LOG_IN', payload: res.data })\r\n        }\r\n        catch (err) {\r\n            dispatch({ type: 'LOGIN_ERR', payload: err.response.data })\r\n            console.log(err ? `ERROR : ${err.response.data}` : err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const logout = () => {\r\n    return async (dispatch) => {\r\n        try {\r\n            localStorage.removeItem('token')\r\n            dispatch({ type: 'LOG_OUT' })\r\n        }\r\n        catch (err) {\r\n            console.log(err)\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport const verification = () => {\r\n    return {\r\n        type: 'VERIFICATION'\r\n    }\r\n}\r\n\r\nexport const keepLogin = () => {\r\n    return async (dispatch) => {\r\n        try {\r\n            // console.log('keep login')\r\n            // get token from local storage\r\n            const token = localStorage.getItem('token')\r\n            // console.log(token)\r\n\r\n            // get user data from token\r\n            const res = await Axios.post('http://localhost:2000/user/keepLogin', { token })\r\n            // console.log('hasil dari api', res.data)\r\n\r\n            dispatch({ type: 'LOG_IN', payload: res.data })\r\n        }\r\n        catch (err) {\r\n            console.log(err)\r\n            localStorage.removeItem('id')\r\n            localStorage.removeItem('token')\r\n            dispatch({ type: 'LOG_OUT' })\r\n        }\r\n    }\r\n}\r\n\r\nexport const editProfile = (data, id) => {\r\n    return async(dispatch) => {\r\n        try{\r\n            const res = await Axios.post(`http://localhost:2000/profile/edit/${id}`, data)\r\n            console.log('hasil respon: ', res.data)\r\n\r\n            const token = localStorage.getItem('token')\r\n\r\n            const res2 = await Axios.post('http://localhost:2000/user/keeplogin', {token})\r\n            dispatch({ type: 'LOG_IN', payload: res2.data})\r\n        }\r\n        catch(err){\r\n            console.log(err)\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}