{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\knigh\\\\Documents\\\\PURWADHIKA JCWM\\\\final_project\\\\PWD-Warehouse-3\\\\Final_Project_Group_3\\\\Front_End\\\\pwd_warehouse_03\\\\src\\\\pages\\\\warehouseStock.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Axios from 'axios';\nimport { getProductStock } from '../actions';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Table, Button, Pagination, Modal, Form } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst WarehouseStock = () => {\n  _s();\n\n  const [modal, setModal] = React.useState(false);\n  const [stockProdId, setStockProdId] = React.useState(null);\n  const [stockJkt, setStockJkt] = React.useState(null);\n  const [stockMedan, setStockMedan] = React.useState(null);\n  const [stockSurabaya, setStockSurabaya] = React.useState(null);\n  const [stockProdName, setStockProdName] = React.useState(\"\");\n  const [stockProdTotal, setStockProdTotal] = React.useState(0);\n  const [qtyErr, setQtyErr] = React.useState([false, \"\"]);\n  const dispatch = useDispatch();\n  const {\n    data\n  } = useSelector(state => {\n    return {\n      data: state.admin.productStock\n    };\n  });\n  React.useEffect(() => {\n    dispatch(getProductStock());\n  }, []); // pagination\n\n  const itemsPerPage = 30;\n  const [page, setPage] = React.useState(1);\n  const noOfPages = Math.ceil(data.length / itemsPerPage);\n  const listItem = Array(noOfPages).fill(1);\n\n  const sendStockHandler = (i, name) => {\n    setStockProdId(i);\n    setStockProdName(name);\n    const filtered = data.filter(item => item.id === i);\n\n    for (const entry of filtered) {\n      if (entry.location === \"Jakarta\") setStockJkt(entry.stock);\n      if (entry.location === \"Medan\") setStockMedan(entry.stock);\n      if (entry.location === \"Surabaya\") setStockSurabaya(entry.stock);\n    }\n\n    const sum = filtered.reduce((a, b) => a + b.stock, 0);\n    setStockProdTotal(sum);\n    setModal(true);\n  };\n\n  const changeQtyJkt = e => {\n    const input = e.target.value;\n    if (isNaN(+input)) return;\n    setStockJkt(+input);\n  };\n\n  const changeQtyMedan = e => {\n    const input = e.target.value;\n    if (isNaN(+input)) return;\n    setStockMedan(+input);\n  };\n\n  const changeQtySurabaya = e => {\n    const input = e.target.value;\n    if (isNaN(+input)) return;\n    setStockSurabaya(+input);\n  };\n\n  const saveHandler = () => {\n    if (stockJkt + stockMedan + stockSurabaya !== stockProdTotal) return setQtyErr([true, `Jumlah tidak sesuai total`]);\n    const input = {\n      id_product: stockProdId,\n      warehouse: [{\n        location: \"Jakarta\",\n        stock: stockJkt\n      }, {\n        location: \"Medan\",\n        stock: stockMedan\n      }, {\n        location: \"Surabaya\",\n        stock: stockSurabaya\n      }]\n    };\n\n    async function fetchData() {\n      try {\n        await Axios.post('http://localhost:2000/admin/editstock', input);\n        dispatch(getProductStock());\n      } catch (err) {\n        console.log(err);\n      }\n    }\n\n    fetchData();\n    setQtyErr([false, \"\"]);\n    setModal(false);\n  };\n\n  const renderTable = () => {\n    return /*#__PURE__*/_jsxDEV(Table, {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Product Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Warehouse Location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Booked\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Total Stock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Action\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: data.slice((page - 1) * itemsPerPage, page * itemsPerPage).map((item, index) => {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.id_warehouse\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.location\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.booked\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.available\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.stock\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => sendStockHandler(item.id, item.name),\n                children: \"Send stock\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this);\n  };\n\n  const renderModal = () => {\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      show: modal,\n      onHide: () => setModal(false),\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: stockProdName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Total Stock Semua Gudang: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              marginLeft: '15px'\n            },\n            children: stockProdTotal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '200px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Jakarta: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              style: {\n                width: '70px',\n                fontSize: '15px',\n                height: '30px'\n              },\n              onChange: e => changeQtyJkt(e),\n              value: stockJkt,\n              min: 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Medan: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              style: {\n                width: '70px',\n                fontSize: '15px',\n                height: '30px'\n              },\n              onChange: e => changeQtyMedan(e),\n              value: stockMedan,\n              min: 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Surabaya : \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              style: {\n                width: '70px',\n                fontSize: '15px',\n                height: '30px'\n              },\n              onChange: e => changeQtySurabaya(e),\n              value: stockSurabaya,\n              min: 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '14px',\n            color: 'red'\n          },\n          children: qtyErr[0] ? qtyErr[1] : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => setModal(false),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: saveHandler,\n          children: \"Save Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: data.length !== 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '110px',\n        padding: 30\n      },\n      children: [renderTable(), /*#__PURE__*/_jsxDEV(Pagination, {\n        children: [/*#__PURE__*/_jsxDEV(Pagination.Prev, {\n          disabled: page <= 1 ? true : false,\n          onClick: () => setPage(page - 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 25\n        }, this), listItem.map((item, index) => {\n          return /*#__PURE__*/_jsxDEV(Pagination.Item, {\n            active: index + 1 === page,\n            onClick: () => setPage(index + 1),\n            children: index + 1\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 33\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(Pagination.Next, {\n          disabled: page >= noOfPages ? true : false,\n          onClick: () => setPage(page + 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 21\n      }, this), stockProdId ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: renderModal()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 189,\n    columnNumber: 9\n  }, this);\n};\n\n_s(WarehouseStock, \"89pGBDzgyNrpeqNrbLbrftz3jzk=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = WarehouseStock;\nexport default WarehouseStock;\n\nvar _c;\n\n$RefreshReg$(_c, \"WarehouseStock\");","map":{"version":3,"sources":["C:/Users/knigh/Documents/PURWADHIKA JCWM/final_project/PWD-Warehouse-3/Final_Project_Group_3/Front_End/pwd_warehouse_03/src/pages/warehouseStock.js"],"names":["React","Axios","getProductStock","useSelector","useDispatch","Table","Button","Pagination","Modal","Form","WarehouseStock","modal","setModal","useState","stockProdId","setStockProdId","stockJkt","setStockJkt","stockMedan","setStockMedan","stockSurabaya","setStockSurabaya","stockProdName","setStockProdName","stockProdTotal","setStockProdTotal","qtyErr","setQtyErr","dispatch","data","state","admin","productStock","useEffect","itemsPerPage","page","setPage","noOfPages","Math","ceil","length","listItem","Array","fill","sendStockHandler","i","name","filtered","filter","item","id","entry","location","stock","sum","reduce","a","b","changeQtyJkt","e","input","target","value","isNaN","changeQtyMedan","changeQtySurabaya","saveHandler","id_product","warehouse","fetchData","post","err","console","log","renderTable","slice","map","index","id_warehouse","booked","available","renderModal","display","marginLeft","width","justifyContent","fontSize","height","color","marginTop","padding"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Axios from 'axios'\r\nimport { getProductStock } from '../actions'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport {\r\n    Table,\r\n    Button,\r\n    Pagination,\r\n    Modal,\r\n    Form\r\n} from 'react-bootstrap'\r\n\r\nconst WarehouseStock = () => {\r\n    const [modal, setModal] = React.useState(false)\r\n    const [stockProdId, setStockProdId] = React.useState(null)\r\n    const [stockJkt, setStockJkt] = React.useState(null)\r\n    const [stockMedan, setStockMedan] = React.useState(null)\r\n    const [stockSurabaya, setStockSurabaya] = React.useState(null)\r\n    const [stockProdName, setStockProdName] = React.useState(\"\")\r\n    const [stockProdTotal, setStockProdTotal] = React.useState(0)\r\n    const [qtyErr, setQtyErr] = React.useState([false, \"\"])\r\n\r\n    const dispatch = useDispatch()\r\n    const { data } = useSelector((state) => {\r\n        return{\r\n            data: state.admin.productStock\r\n        }\r\n    })\r\n\r\n    React.useEffect(() => {\r\n        dispatch(getProductStock())\r\n    }, [])\r\n    \r\n    // pagination\r\n    const itemsPerPage = 30\r\n    const [page, setPage] = React.useState(1)\r\n    const noOfPages = Math.ceil(data.length / itemsPerPage)\r\n    const listItem = Array(noOfPages).fill(1)\r\n\r\n    const sendStockHandler = (i, name) => {\r\n        setStockProdId(i)\r\n        setStockProdName(name)\r\n        \r\n        const filtered = data.filter(item => item.id === i)\r\n\r\n        for(const entry of filtered) {\r\n            if(entry.location === \"Jakarta\") setStockJkt(entry.stock)\r\n            if(entry.location === \"Medan\") setStockMedan(entry.stock)\r\n            if(entry.location === \"Surabaya\") setStockSurabaya(entry.stock)\r\n        }\r\n\r\n        const sum = filtered.reduce((a, b) => a + b.stock, 0)\r\n        setStockProdTotal(sum)\r\n        setModal(true)\r\n    }\r\n\r\n    const changeQtyJkt = (e) => {\r\n        const input = e.target.value\r\n        if(isNaN(+input)) return \r\n        setStockJkt(+input)\r\n    }\r\n\r\n    const changeQtyMedan = (e) => {\r\n        const input = e.target.value\r\n        if(isNaN(+input)) return \r\n        setStockMedan(+input)\r\n    }\r\n\r\n    const changeQtySurabaya = (e) => {\r\n        const input = e.target.value\r\n        if(isNaN(+input)) return \r\n        setStockSurabaya(+input)\r\n    }\r\n\r\n    const saveHandler = () => {\r\n        if(stockJkt + stockMedan + stockSurabaya !== stockProdTotal) return setQtyErr([true, `Jumlah tidak sesuai total`])\r\n        const input = {\r\n            id_product: stockProdId,\r\n            warehouse: [\r\n                {location: \"Jakarta\", stock: stockJkt},\r\n                {location: \"Medan\", stock: stockMedan},\r\n                {location: \"Surabaya\", stock: stockSurabaya}\r\n            ]\r\n        }\r\n\r\n        async function fetchData() {\r\n            try {\r\n                await Axios.post('http://localhost:2000/admin/editstock', input)\r\n                \r\n                dispatch(getProductStock())\r\n            }\r\n            catch (err) {\r\n                console.log(err)\r\n            }\r\n        }\r\n        fetchData()\r\n\r\n        setQtyErr([false, \"\"])\r\n        setModal(false)\r\n    }\r\n\r\n    const renderTable = () => {\r\n        return(\r\n            <Table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>No</th>\r\n                        <th>Product Name</th>\r\n                        <th>Warehouse Location</th>\r\n                        <th>Booked</th>\r\n                        <th>Available</th>\r\n                        <th>Total Stock</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        data\r\n                        .slice((page - 1) * itemsPerPage, page * itemsPerPage)\r\n                        .map((item, index) => {\r\n                            return(\r\n                                <tr>\r\n                                    <td>{item.id_warehouse}</td>\r\n                                    <td>{item.name}</td>\r\n                                    <td>{item.location}</td>\r\n                                    <td>{item.booked}</td>\r\n                                    <td>{item.available}</td>\r\n                                    <td>{item.stock}</td>\r\n                                    <td>\r\n                                        <Button onClick={() => sendStockHandler(item.id, item.name)}>\r\n                                            Send stock\r\n                                        </Button>\r\n                                    </td>\r\n                                </tr>\r\n                            )\r\n                        })\r\n                    }\r\n                </tbody>\r\n            </Table>\r\n        )\r\n    }\r\n\r\n    const renderModal = () => {\r\n        return(\r\n            <Modal show={modal} onHide={() => setModal(false)}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{stockProdName}</Modal.Title>\r\n                </Modal.Header>\r\n\r\n                <Modal.Body>\r\n                    <div style={{display: 'flex'}}>\r\n                        <p>Total Stock Semua Gudang: </p>\r\n                        <p style={{marginLeft: '15px'}}>{stockProdTotal}</p>\r\n                    </div>\r\n\r\n                    <div style={{width: '200px'}}>\r\n                        <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                            <p>Jakarta: </p>\r\n                            <Form.Control style={{width: '70px', fontSize: '15px', height: '30px'}} onChange={(e) => changeQtyJkt(e)} value={stockJkt} min={0}/>\r\n                        </div>\r\n\r\n                        <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                            <p>Medan: </p>\r\n                            <Form.Control style={{width: '70px', fontSize: '15px', height: '30px'}} onChange={(e) => changeQtyMedan(e)} value={stockMedan} min={0}/>\r\n                        </div>\r\n\r\n                        <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                            <p>Surabaya : </p>\r\n                            <Form.Control style={{width: '70px', fontSize: '15px', height: '30px'}} onChange={(e) => changeQtySurabaya(e)} value={stockSurabaya} min={0}/>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <p style={{fontSize: '14px', color: 'red'}}>{qtyErr[0] ? qtyErr[1] : \"\" }</p>\r\n                </Modal.Body>\r\n                        \r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={() => setModal(false)}>\r\n                        Close\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={saveHandler}>\r\n                        Save Changes\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        )\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            {\r\n                data.length !== 0\r\n                ?\r\n                <div style={{marginTop: '110px', padding: 30}}>\r\n                    {renderTable()}\r\n                    <Pagination>\r\n                        <Pagination.Prev disabled={page <= 1 ? true : false} onClick={() => setPage(page - 1)} />\r\n                        {listItem.map((item, index) => {\r\n                            return (\r\n                                <Pagination.Item key={index} active={index+1 === page} onClick={() => setPage(index+1)}>{index+1}</Pagination.Item>\r\n                            )\r\n                        })}\r\n                        <Pagination.Next disabled={page >= noOfPages ? true : false} onClick={() => setPage(page + 1)} />\r\n                    </Pagination>\r\n                    \r\n                    {\r\n                        stockProdId\r\n                        ?\r\n                        <div>\r\n                            {renderModal()}\r\n                        </div>\r\n                        :\r\n                        <div></div>\r\n                    }\r\n                    \r\n                </div>\r\n                :\r\n                <div></div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WarehouseStock"]},"metadata":{},"sourceType":"module"}